<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="site.metacoding.firstapp.domain.post.PostDao">

    <select id="readOnly" resultType="site.metacoding.firstapp.web.dto.post.PostReadDto"> SELECT *
        FROM category </select>

    <select id="updateView" resultType="site.metacoding.firstapp.web.dto.post.PostUpdateRespDto">SELECT
        * FROM category</select>

    <insert id="insert"> INSERT INTO post(post_title, post_content, post_thumnail, category_id,
        user_id, created_at) VALUES(#{postTitle}, #{postContent}, #{postThumnail}, #{categoryId},
        #{userId},NOW()) </insert>


    <select id="findAll" resultType="site.metacoding.firstapp.domain.post.Post">SELECT
        c.category_id, c.category_title, p.post_id, p.post_title, p.post_content, p.post_thumnail,
        p.user_id, p.category_id, p.created_at FROM category c INNER JOIN post p ON p.category_id =
        c.category_id</select>

    <select id="findById" resultType="site.metacoding.firstapp.domain.post.Post"> SELECT * FROM post
        WHERE post_id = #{postId} </select>


    <update id="update"> UPDATE post SET category_id = #{categoryId}, post_title = #{postTitle},
        post_content = #{postContent}, post_thumnail= #{postThumnail} WHERE post_id = #{postId} </update>

</mapper>



 